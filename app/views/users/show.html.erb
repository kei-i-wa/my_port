<div class="container">
  <div class="row">

    <!--col3にユーザーの基本情報格納-->
    <%= render 'info', user: @user %>


<!--そのユーザーの自己紹介を表示-->
<div class="col-md-8 ml-5" style="margin-top:1em;">

<ul class="nav nav-tabs" id="tabs">
  <% if @user.id == current_user.id %>
  <li class="nav-item"><a class="nav-link" href=""><h6>Introduction</h6></a></li>
  <li class="nav-item"><a class="nav-link active" href=""><h6>Status</h6></i></a></li>
  <li class="nav-item"><a class="nav-link" href=""><h6>Activity</h6></i></a></li>
  <% else %>
  <li class="nav-item"><a class="nav-link active" href="">Introduction</a></li>
  <li class="nav-item"><a class="nav-link" href="">Status</i></a></li>
  <li class="nav-item"><a class="nav-link" href="">Activity</i></a></li>
  <% end %>

</ul>

<ul id="tab-contents">
  <% if @user.id == current_user.id %>
  <div class="tab_contents_item" style="padding:10px;">
  <% else %>
  <div class="tab_contents_item active" style="padding:10px;">
  <% end %>
    <% if @user.introduction.present?%>
    <p><%== @user.introduction %></p>
    <% else %>
    <p style="color:green;">自己紹介は未入力です。<br>
    社員の皆さんに現在の業務内容、得意分野についてシェアしましょう。</p><% end %>
  </div>

  <% if @user.id == current_user.id %>
  <div class="tab_contents_item active" style="padding:10px;">
  <% else %>
  <div class="tab_contents_item" style="padding:10px;">
  <% end %>
      <h3><i class="fas fa-ship"></i>
      <strong><%= @point.length %></strong> TEU</h3>

      <p>最近の投稿に紐付けたタグ</p>
      <% @posts_tag.each do |tag| %>
      <%= link_to tag.name,search_tag_path(tag_id: tag.id)%>(<%= tag.posts.count%>)
      <% end %>
  </div>

  <div class="tab_contents_item" style="padding:10px;">


<canvas id="myChart_2" width="200" height="50"></canvas>

    <script>
    var ctx = document.getElementById("myChart_2").getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['6日前', '5日前', '4日前','3日前', '2日前', '1日前', '今日'],
            datasets: [{
                label: "投稿数",
                data: [<%= @posts.created_6days_ago.count %>,<%= @posts.created_5days_ago.count %>,<%= @posts.created_4days_ago.count %>,<%= @posts.created_3days_ago.count %>, <%= @posts.created_2days_ago.count %>, <%= @posts.created_yesterday.count %>, <%= @posts.created_today.count %>],
                backgroundColor: 'rgba(175, 238, 238, 1.0)',
                borderColor: 'rgba(175, 238, 238, 1.0)',
                fill: false},{

                label: "もらったいいね数",
                data: [<%= @point.created_6days_ago.count %>,<%= @point.created_5days_ago.count %>,<%= @point.created_4days_ago.count %>,<%= @point.created_3days_ago.count %>, <%= @point.created_2days_ago.count %>, <%= @point.created_yesterday.count %>, <%= @point.created_today.count %>],
                backgroundColor: "rgba(255,192,203,1)",
                borderColor: 'rgba(255,192,203,1)',
                type: 'line',
                // fill: false
            }]
        },
    });
</script>
</div>
</ul>
</div>


<div class="mt-3 col-md-3">
  <h6>Stock</h6>
  <p><%=link_to "下書き記事　　", confirm_user_path(@user)%></p>
  <p><%=link_to"いいねした記事　",favorites_user_path(@user)%></p>
  <p><%=link_to "コメントした記事", comments_user_path(@user)%></p>
</div>

<!--自分の投稿を表示-->
<div class="col-md-8 ml-5 mt-3">
  <h6>My port</h6>
      <table class="table table-hover">
    <thead>
      <tr>
        <th style="width:80%;">Title</th>
        <th style="width:10%;">Good!</th>
        <th style="width:10%;">Comments</th>
      </tr>
    </thead>
    <% @posts.each do |post| %>
    <tbody>
      <tr>
        <th><%= link_to post_path(post.id) do %><%= post.title %><% end %></th>
        <% if post.favorited_by?(current_user) %>
        <th><i class="fas fa-check"><%= post.favorites.count %></i></th>
        <% else %>
        <th><i class="far fa-star"><%=post.favorites.count%></i></th>
        <% end %>
        <th><i class="far fa-comment-dots"><%=post.post_comments.count%></i></th>
      </tr>
    </tbody>
    <% end %>
    </table>
    </div>

<!--ページネーション-->
<%= paginate@posts %>



  </div>
</div>

<style>
  .user_box {
    padding: 0.5em 1em;
    margin: 1em 0;
    border: double 5px #5d627b;
}

h6 {
  /*線の種類（実線） 太さ 色*/
  border-bottom: solid 3px black;
}





</style>
