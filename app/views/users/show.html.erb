<div class="container">
  <div class="row">

    <!--col3にユーザーの基本情報格納-->
    <%= render 'info', user: @user %>


<!--そのユーザーの自己紹介を表示-->
<div class="col-md-8 ml-5" style="margin-top:1em;">
  <h6>Introduction</h6>
  <% if @user.introduction.present?%>
  <p><%== @user.introduction %></p>
  <% else %>
  <p style="color:green;">自己紹介は未入力です。<br>
  社員の皆さんに現在の業務内容、得意分野についてシェアしましょう。</p>
  <% end %>
</div>

<!--グラフいいね数、閲覧数などの情報を表示-->
<div class="mt-3 col-md-3">

  <h6>Status</h6>
<table class="table">
  <thead>
    <tr>
      <th>今日/全体</th>
      <th>昨日/全体</th>
      <th>3日前/全体</th>
      <th>先週/全体</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th><%= @posts.created_today.count %>/<%= @posts_all.created_today.count %></th>
      <th><%= @posts.created_yesterday.count %>/<%= @posts_all.created_yesterday.count %></th>
      <th><%= @posts.created_2days_ago.count %>/<%= @posts_all.created_2days_ago.count %></th>
      <th><%= @posts_all.created_this_week.count %>/<%= @posts_all.created_this_week.count %></th>
    </tr>
  </tbody>
</table>

<canvas id="myChart" width="300" height="100"> </canvas>

    <script> 
    var ctx = document.getElementById("myChart").getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',                      
        data: {
            labels: ['3日前', '2日前', '1日前', '今日'],
            datasets: [{
                label: "あなたの投稿",
                data: [<%= @posts.created_3days_ago.count %>, <%= @posts.created_2days_ago.count %>, <%= @posts.created_yesterday.count %>, <%= @posts.created_today.count %>],
                backgroundColor: 'rgba(255, 80, 120, 1.0)',
                borderColor: 'rgba(255, 80, 120, 1.0)',
                fill: false},{
                
                label: "全体の投稿",
                data: [<%= @posts_all.created_3days_ago.count %>, <%= @posts_all.created_2days_ago.count %>, <%= @posts_all.created_yesterday.count %>, <%= @posts_all.created_today.count %>],
                backgroundColor: "rgba(255,192,203,1)",
                borderColor: 'rgba(255, 99, 71, 1.0)',
                type: 'line', 
                // fill: false
            }]
        },
    });
</script>

  
</div>

<!--自分の投稿を表示-->
<div class="col-md-8 ml-5 mt-3">
<h6>My port</h6>
<p><%=link_to"お気に入り記事",favorites_user_path(@user) %></p>
<%=link_to "下書き一覧", confirm_user_path(@user)%>




  <table>
    <% @posts.each do |post| %>
    <tbody>
      <tr>
        <th><%= link_to post_path(post.id) do %><%= post.title %><% end %></th>
        <% if post.favorited_by?(current_user) %>
        <th><i class="fas fa-check"><%= post.favorites.count %></i></th>
        <% else %>
        <th><i class="far fa-star"><%=post.favorites.count%></i></th>
        <% end %>
        <th><i class="far fa-comment-dots"><%=post.post_comments.count%></i></th>
      </tr>
    </tbody>
    <% end %>
    </table>
</div>

<!--ページネーション-->
<%= paginate@posts %>



  </div>
</div>

<style>
  .user_box {
    padding: 0.5em 1em;
    margin: 1em 0;
    border: double 5px #5d627b;
}

h6 {
  /*線の種類（実線） 太さ 色*/
  border-bottom: solid 3px black;
}
</style>
